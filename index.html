<!--
single-file HTML psychological quiz ready for GitHub Pages.
How to use:
1. Save this file as index.html in a new GitHub repository.
2. Enable GitHub Pages (Settings -> Pages) and select the main branch root.
3. The page will be served at https://<your-username>.github.io/<repo>/

Features:
- 20 multiple-choice questions.
- Each option maps to one of six result types.
- Progress bar, previous/next navigation, review, and final results.
- Results show dominant type and score breakdown.
- No external libraries. Single file.
-->

<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>心理測驗</title>
  <style>
    :root{--bg:#f6f7fb;--card:#ffffff;--accent:#2b6cb0;--muted:#667085}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans TC',Helvetica,Arial}
    body{background:linear-gradient(180deg,#f6f7fb 0%,#eef2f7 100%);display:flex;align-items:center;justify-content:center;padding:24px}
    .container{width:960px;max-width:100%;background:var(--card);border-radius:12px;box-shadow:0 8px 30px rgba(15,23,42,0.08);overflow:hidden}
    header{padding:20px 28px;border-bottom:1px solid #eef2f7}
    h1{margin:0;font-size:20px}
    .meta{color:var(--muted);font-size:13px;margin-top:6px}
    main{padding:22px}
    .progress{height:10px;background:#e9eef6;border-radius:999px;overflow:hidden;margin-bottom:16px}
    .progress > i{display:block;height:100%;background:var(--accent);width:0%}
    .question-card{padding:18px;border-radius:8px;background:#fbfdff;border:1px solid #f1f6fb}
    .q-text{font-weight:600;margin-bottom:12px}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .option{border:1px solid #e6eef9;padding:12px;border-radius:8px;cursor:pointer}
    .option input{display:none}
    .option.selected{border-color:var(--accent);box-shadow:0 4px 18px rgba(43,108,176,0.12)}
    .nav{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
    button{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer}
    button.secondary{background:#eef2f7;color:var(--accent);border:1px solid #dbeafc}
    .results{padding:22px}
    .result-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .type-card{background:#fff;padding:12px;border-radius:8px;border:1px solid #f1f6fb}
    .type-title{font-weight:700}
    .score-bar{height:10px;background:#eef6ff;border-radius:999px;margin-top:8px}
    .score-fill{height:100%;background:var(--accent);width:0%;border-radius:999px}
    footer{padding:12px 22px;border-top:1px solid #f1f6fb;color:var(--muted);font-size:13px}
    @media (max-width:640px){.options{grid-template-columns:1fr}.result-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container" role="application">
    <header>
      <h1>心理測驗</h1>
    </header>

    <main>
      <div class="progress" aria-hidden="true"><i id="progressFill"></i></div>

      <div id="quizArea">
        <!-- question card injected here -->
      </div>

      <div class="nav">
        <div>
          <button id="prevBtn" class="secondary">上一步</button>
          <button id="nextBtn" class="secondary">下一步</button>
        </div>
        <div>
          <button id="submitBtn">提交並查看結果</button>
        </div>
      </div>

      <div id="resultArea" style="display:none" class="results"></div>
    </main>
  </div>

  <script>
    // 六種類型的代號與描述
    const TYPES = [
      { id: 0, name: '探索者', desc: '好奇、有想法、喜歡嘗試新事物。' },
      { id: 1, name: '穩健者', desc: '謹慎、可靠、注重細節與穩定。' },
      { id: 2, name: '社交者', desc: '外向、善於溝通、重視人際。' },
      { id: 3, name: '創造者', desc: '富想像、愛表達、重視美感。' },
      { id: 4, name: '分析者', desc: '邏輯導向、喜歡規劃與分析。' },
      { id: 5, name: '實踐者', desc: '行動導向、注重效率與成果。' }
    ];

    // 20 題題庫。每個選項帶有 typeId（0..5）代表得分對應
    const QUESTIONS = [
      { q: '你面對新任務時會怎麼做？', opts: [
        { t:0, txt: '先嘗試並摸索' },
        { t:4, txt: '做計畫並分析步驟' },
        { t:5, txt: '馬上開始以最快方式完成' },
        { t:1, txt: '觀察並等待合適時機' }
      ]},
      { q: '你的社交風格偏向？', opts: [
        { t:2, txt: '喜歡主動互動' },
        { t:1, txt: '保持禮貌但不過度' },
        { t:3, txt: '透過共同興趣建立連結' },
        { t:4, txt: '偏好小圈子深聊' }
      ]},
      { q: '解決問題時你較在意什麼？', opts: [
        { t:4, txt: '正確性與邏輯' },
        { t:5, txt: '迅速可執行的解法' },
        { t:3, txt: '創新與不同視角' },
        { t:1, txt: '風險與影響評估' }
      ]},
      { q: '你休閒時最喜歡做什麼？', opts: [
        { t:0, txt: '嘗試新活動' },
        { t:3, txt: '創作或藝術相關' },
        { t:2, txt: '跟朋友聚會' },
        { t:1, txt: '放鬆、維持規律' }
      ]},
      { q: '在團隊中你通常扮演？', opts: [
        { t:5, txt: '把事情推進的人' },
        { t:4, txt: '分析與規劃的角色' },
        { t:2, txt: '協調人際與氛圍' },
        { t:3, txt: '提出創意與視覺想法' }
      ]},
      { q: '對於改變你的工作方式，你的態度是？', opts: [
        { t:0, txt: '抱持好奇並嘗試' },
        { t:1, txt: '緩慢接受並評估' },
        { t:5, txt: '看結果決定是否繼續' },
        { t:4, txt: '先做風險與效益分析' }
      ]},
      { q: '你在溝通時偏好哪種方式？', opts: [
        { t:2, txt: '面對面、感受氛圍' },
        { t:4, txt: '書面清楚條列重點' },
        { t:3, txt: '用故事或圖像表達' },
        { t:1, txt: '保持禮貌與保守' }
      ]},
      { q: '面對壓力，你通常會？', opts: [
        { t:1, txt: '先退一步調整' },
        { t:5, txt: '列清單並逐項完成' },
        { t:4, txt: '分析來源並解構問題' },
        { t:0, txt: '尋找新的出路或資源' }
      ]},
      { q: '你選擇朋友的主要依據是？', opts: [
        { t:2, txt: '相處輕鬆，能聊天' },
        { t:3, txt: '有共同興趣或創意火花' },
        { t:1, txt: '值得信賴且低衝突' },
        { t:0, txt: '對方能帶來新經驗' }
      ]},
      { q: '你怎麼做決策？', opts: [
        { t:4, txt: '收集數據後分析' },
        { t:5, txt: '權衡後迅速執行' },
        { t:1, txt: '基於經驗與安全感' },
        { t:0, txt: '憑直覺與好奇心' }
      ]},
      { q: '你對長期目標的態度是？', opts: [
        { t:4, txt: '訂計畫並檢視進度' },
        { t:5, txt: '分段執行並重視結果' },
        { t:0, txt: '視機會調整方向' },
        { t:1, txt: '保持穩定漸進' }
      ]},
      { q: '你如何看待創新？', opts: [
        { t:3, txt: '必要且令人興奮' },
        { t:4, txt: '需配合嚴謹驗證' },
        { t:5, txt: '只要可行就好' },
        { t:0, txt: '嘗試它，學習再調整' }
      ]},
      { q: '你在學習新事物時偏好？', opts: [
        { t:4, txt: '系統與結構化教材' },
        { t:0, txt: '實作中學習並摸索' },
        { t:3, txt: '用創作把概念內化' },
        { t:2, txt: '跟他人討論學習' }
      ]},
      { q: '當團隊意見分歧，你通常？', opts: [
        { t:2, txt: '傾向溝通與妥協' },
        { t:4, txt: '提出數據與邏輯支持' },
        { t:1, txt: '保守選較小風險方案' },
        { t:5, txt: '選擇能快速推進的路徑' }
      ]},
      { q: '你的時間管理風格是？', opts: [
        { t:5, txt: '任務導向與時限驅動' },
        { t:4, txt: '設定優先順序並排程' },
        { t:0, txt: '保留彈性讓創意發生' },
        { t:1, txt: '固定例行與穩定節奏' }
      ]},
      { q: '你如何應對批評？', opts: [
        { t:4, txt: '分析是否合理並改進' },
        { t:2, txt: '傾聽並處理人際感受' },
        { t:3, txt: '把批評當作創作養分' },
        { t:1, txt: '先保護自己，慢慢吸收' }
      ]},
      { q: '在團體活動你較常做？', opts: [
        { t:2, txt: '活躍帶動氣氛' },
        { t:3, txt: '策劃有趣主題或美感' },
        { t:5, txt: '把活動安排好並執行' },
        { t:1, txt: '觀察並提供支援' }
      ]},
      { q: '你評價成功的標準是？', opts: [
        { t:5, txt: '完成並達成具體成果' },
        { t:4, txt: '達到效率與精準' },
        { t:3, txt: '創造影響力與新觀點' },
        { t:2, txt: '建立持久的人際網絡' }
      ]},
      { q: '當你無法決定時，你會？', opts: [
        { t:4, txt: '回到資料與邏輯' },
        { t:2, txt: '諮詢朋友的意見' },
        { t:1, txt: '選較保守安全的方案' },
        { t:0, txt: '試小範圍實驗看看' }
      ]}
    ];

    // state
    let answers = Array(QUESTIONS.length).fill(null);
    let idx = 0;

    const quizArea = document.getElementById('quizArea');
    const progressFill = document.getElementById('progressFill');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const resultArea = document.getElementById('resultArea');

    function renderQuestion(i){
      const item = QUESTIONS[i];
      quizArea.innerHTML = '';
      const card = document.createElement('div');
      card.className = 'question-card';

      const qText = document.createElement('div'); qText.className='q-text'; qText.textContent = `第 ${i+1} 題： ${item.q}`;
      card.appendChild(qText);

      const optsCont = document.createElement('div'); optsCont.className='options';

      item.opts.forEach((opt, j)=>{
        const optDiv = document.createElement('label');
        optDiv.className = 'option';
        optDiv.tabIndex = 0;
        optDiv.dataset.type = opt.t;
        optDiv.innerHTML = `<input type='radio' name='q${i}' value='${opt.t}' aria-label='選項${j+1}'/><div>${opt.txt}</div>`;
        if(answers[i] === opt.t) optDiv.classList.add('selected');
        optDiv.addEventListener('click', ()=>{
          // mark answer
          answers[i] = opt.t;
          // visual select
          const siblings = optsCont.querySelectorAll('.option');
          siblings.forEach(s=>s.classList.remove('selected'));
          optDiv.classList.add('selected');
          // auto-next small delay for UX
        });
        optsCont.appendChild(optDiv);
      });

      card.appendChild(optsCont);

      const footerNote = document.createElement('div');
      footerNote.style.marginTop='10px';
      footerNote.style.color='var(--muted)';
      footerNote.textContent = `題目 ${i+1} / ${QUESTIONS.length}`;
      card.appendChild(footerNote);

      quizArea.appendChild(card);

      updateProgress();

      // toggle nav
      prevBtn.disabled = i===0;
      nextBtn.disabled = i===QUESTIONS.length-1;
    }

    function updateProgress(){
      const answered = answers.filter(x=>x!==null).length;
      const pct = Math.round((answered/QUESTIONS.length)*100);
      progressFill.style.width = pct + '%';
    }

    prevBtn.addEventListener('click', ()=>{
      if(idx>0) idx--;
      renderQuestion(idx);
    });

    nextBtn.addEventListener('click', ()=>{
      if(idx<QUESTIONS.length-1) idx++;
      renderQuestion(idx);
    });

    submitBtn.addEventListener('click', ()=>{
      // require all answered
      const unanswered = answers.findIndex(a=>a===null);
      if(unanswered !== -1){
        // jump to first unanswered
        idx = unanswered;
        renderQuestion(idx);
        alert('請完成所有題目後再提交。系統將跳到尚未作答的題目。');
        return;
      }
      computeResults();
    });

    function computeResults(){
      // tally scores per type
      const tally = new Array(TYPES.length).fill(0);
      answers.forEach(a=>{ if(typeof a === 'number' && a>=0 && a<TYPES.length) tally[a]++ });

      // calculate percentages
      const total = QUESTIONS.length;
      const percentages = tally.map(v => Math.round((v/total)*100));

      // find top type (tie-breaker: higher raw count then lower id)
      let maxVal = -1, maxIdx = 0;
      for(let i=0;i<tally.length;i++){
        if(tally[i] > maxVal){ maxVal = tally[i]; maxIdx = i; }
      }

      showResult(maxIdx,tally,percentages);
    }

    function showResult(topType,tally,percentages){
      quizArea.style.display='none';
      document.querySelector('.nav').style.display='none';
      resultArea.style.display='block';
      resultArea.innerHTML = '';

      const header = document.createElement('div');
      header.innerHTML = `<h2>你的主要類型：${TYPES[topType].name}</h2><p style="color:var(--muted)">${TYPES[topType].desc}</p>`;
      resultArea.appendChild(header);

      const breakdown = document.createElement('div'); breakdown.className='result-grid';
      for(let i=0;i<TYPES.length;i++){
        const c = document.createElement('div'); c.className='type-card';
        c.innerHTML = `<div class='type-title'>${TYPES[i].name} (${tally[i]} 題)</div>
                       <div style='font-size:13px;color:var(--muted);margin-top:6px'>${TYPES[i].desc}</div>
                       <div class='score-bar' aria-hidden='true'><div class='score-fill' style='width:${percentages[i]}%'></div></div>
                       <div style='font-size:13px;margin-top:6px;color:var(--muted)'>${percentages[i]}%</div>`;
        breakdown.appendChild(c);
      }
      resultArea.appendChild(breakdown);

      const actions = document.createElement('div'); actions.style.marginTop='14px';
      actions.innerHTML = `<button id='restartBtn'>重新測驗</button> <button id='reviewBtn' class='secondary'>檢視答題</button>`;
      resultArea.appendChild(actions);

      document.getElementById('restartBtn').addEventListener('click', ()=>{ location.reload(); });
      document.getElementById('reviewBtn').addEventListener('click', ()=>{ showReview(); });

      // small accessibility focus
      resultArea.querySelector('button').focus();
    }

    function showReview(){
      // show all questions with chosen answers
      resultArea.innerHTML = '<h3>答題檢視</h3>';
      QUESTIONS.forEach((item,i)=>{
        const wrap = document.createElement('div'); wrap.style.margin='8px 0';
        const q = document.createElement('div'); q.textContent = `第 ${i+1} 題： ${item.q}`; q.style.fontWeight='600';
        wrap.appendChild(q);
        const chosen = item.opts.find(o=>o.t === answers[i]);
        const ch = document.createElement('div'); ch.textContent = `你的選擇： ${chosen ? chosen.txt : '未作答'}`; ch.style.color='var(--muted)';
        wrap.appendChild(ch);
        resultArea.appendChild(wrap);
      });
      const back = document.createElement('div'); back.style.marginTop='12px';
      back.innerHTML = `<button id='backToResult' class='secondary'>返回結果</button>`;
      resultArea.appendChild(back);
      document.getElementById('backToResult').addEventListener('click', ()=>{ computeResults(); });
    }

    // initial render
    renderQuestion(idx);

    // keyboard support for option selection
    document.addEventListener('keydown', (e)=>{
      if(document.activeElement && document.activeElement.classList.contains('option')){
        if(e.key === 'Enter' || e.key === ' '){ document.activeElement.click(); e.preventDefault(); }
      }
      if(e.key === 'ArrowRight'){ if(idx < QUESTIONS.length-1){ idx++; renderQuestion(idx); } }
      if(e.key === 'ArrowLeft'){ if(idx > 0){ idx--; renderQuestion(idx); } }
    });

    // expose for debugging
    window._QUIZ = { QUESTIONS, TYPES };
  </script>
</body>
</html>
